---
title: Text Generation Part 3
status: pending
---
<div class="container mt-4">
<h1>Text generation Part Three</h1>
<p class="lead">Prerequisites: You should have read <a href="{{ site.baseurl }}{% link _tutorials/phrases2.html %}">Text Generation Part Two</a>.</p>

<h2>Suffixes</h2>	
<p>Modifiers that are methods or getters of <code>ishml.Phrase</code> are referred to as <b>suffixes</b> in this tutorial.  An unlimited number of suffixes may by chained together with dot notation to apply layer upon layer of modifications. Suffixes are applied from left to right. That is, the suffix closest to the right parenthesis parenthesis or closing backtick is applied to the phrase first. Then the next closest suffix is applied to that result and so on until the beginning of the chain is reached. If a phrase definition also has prefixes, the prefixes are applied first to create a phrase and the suffixes are applied to that phrase to create a new phrase.</p>
<p> Unlike prefixes, which take a hybrid approach, a suffix is either a method or a <a href=https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/get"">getter</a>. Suffixes that are methods must take arguments and <b>must</b> include a pair a parentheses or back ticks.  Others suffixes are defined as getters and parentheses and back ticks <b>must</b> be omitted. The use of getters improves code readablity since the phrases aren't cluttered with empty pairs of parentheses.</p>

<p>Listing 1 shows examples of suffixes in use.  An alphabetical list of all built-in suffixes is available in the <a href="{{ site.baseurl }}{% link api.html %}">API Reference</a>. </p>
<span class="badge badge-info">Listing 1</span>
<iframe id="listing1" width="100%" height="275" src="//jsfiddle.net/bikibird/60senow4/embedded/html,js,result/?fontColor=ffffff&menuColor=17a2b8" frameborder="0" class="rounded shadow" title="Listing 1"></iframe>
<p>The <code>example1</code> phrase demonstrates the <code>.ing</code> suffix, which turns a verb into a gerund.  The <i>en-us.js</i> script extends <code>ishml.Phrase</code> to provide a library of many <a href="{{ site.baseurl }}{% link api.html %}">modern American-English suffixes</a> for nouns, adjectives, and verbs.</p>
<p>When a phrase has both prefixes and suffixes attached, the prefixes are applied first and then suffixes are applied to the result.  This sometimes leads to unintended results like <code>example2</code> in the listing above.  Only the last verb has the <q>ing</q> ending applied to it because the list prefix was applied first. Then the list text was capitalized before finally adding <q>ing</q> to the end of the resulting text. </p>
<p>This behavior may be changed by nesting phrases.  When phrases are nested, the inner phrase is evaluated before the outer phrase. The inner, inner phrase of <code>example3</code> first applies <code>.ing</code> to each of the verbs. Once this phrase has been evaulated, the phrase surrounding it turns it into a comma delimited list followed by capitalizing the first letter of result. There are no restrictions on how deeply a phrase may be nested.</p>
<h2>Tags in Context</h2>
<p>We first encountered the <code>.tag()</code> suffix in <a href="{{ site.baseurl }}{% link _tutorials/phrases1.html %}">part one of this tutorial</a>, where it was used to tag phrases for data population.  However, there are other uses for tagged phrases. Examine the JavaScript in listing 2.</p>

<span class="badge badge-info">Listing 2</span>
<iframe id="listing2" width="100%" height="400" scrolling="no" src="//jsfiddle.net/bikibird/zt3aL6r4/embedded/html,js,result/?fontColor=ffffff&menuColor=17a2b8" frameborder="0" class="rounded shadow wrap" title="Listing 2"></iframe>

<p>Tagged phrases are stored as properties of the outermost phrase. The outermost phrase is termed the <b>context phrase</b>.  It doesn't matter how deeply the tagged sub-phrases are nested; they will always be surfaced as properties of the context phrase.  Once a tag has been defined, the <code>.context</code> prefix provides access to the context phrase.</p>

<p>The <code>example1</code> variable holds the context phrase. Its first sub-phrase is tagged as <q>pet</q> and is the <code>.pet</code> property of <code>example1</code>. However, we cannot simply refer to <code>example1.pet</code> in the sub-phrase definition becase <code>example1</code> is still undefined. Instead, in the second sub-phrase, <code>.context.pet</code> is used to refer to the sub-phrase tagged as <q>pet</q>.  The <code>.a</code> prefix is included to add the appropriate indefinite article to the sub-phrase.  During text generation a new animal will be picked at random for each of the two sub-phrases.</p> 

<p>Sometimes when referring to a tagged phrase, we don't want to generate entirely new text; we just want repeat the same text that was already generated in an earlier sub-phrase. Study <code>example2</code>. The last expression contains a function, <code>context=>context.pet.text</code>. Anytime a function is encountered during text generation, the function is called with the context phrase as the argument. The <code>.text</code> property of <code>context.pet</code> provides the text that was generated for the frist sub-phrase.</p>

<p>The pet sub-phrase</p>

<h2>If, Then, and Else <h2>
<h2>Concur</h2>
<h2>Recursion</h2>



<p>Continue to <!--a href="{{ site.baseurl }}{% link _tutorials/phrases2.html %}">part two</a--> to learn about more complex grammars, including choice rules and semantic analysis.</p>

	
</div>    

       
