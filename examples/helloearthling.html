<html>
	<head>
			<link rel="stylesheet" href="../src/ishml.css">
	</head>
	<body>
		<h1 class="ishml-dropbox">target</h1>
	  	<div id="story"></div>
		<script src="../src/apex.js"></script>
		<script src="../src/util.js"></script>
	  	<script src="../src/knot.js"></script>
		<script src="../src/cord.js"></script>
		<script src="../src/yarn.js"></script>
		<script src="../src/plotpoint.js"></script>
		<script src="../src/storyline.js"></script>
		<script src="../src/lexicon.js"></script>
		<script src="../src/rule.js"></script>
		<script src="../src/token.js"></script>
		<script src="../src/set.js"></script>
		 
		<script>
			var story= ishml.Yarn()
			var plot= story.plot
			plot.add("hello","Hello")
			plot.hello
				.add("venus","A little hotspot known as Venus.")
				.add("earth","That beautiful blue marble, Earth.")
				.add("mars", "A red and dusty place.")
			plot.hello.venus
				.add("yes","Yes, please.")
				.add("no","No, thanks.")
			plot.hello.earth
				.add("yes","Yes, please.")
				.add("no","No, thanks.")
			plot.hello.mars
				.add("yes","Yes, please.")
				.add("no","No, thanks.")

			plot.hello.narrate=function()
			{
				var passage=`<p>Welcome to Cafe Andromeda.  <span draggable=true data-command="player">You</span> look new around here.  Where are you from?</p>`
				var choiceParagraphs=``
				this.subplot.forEach(p=>
				{
					choiceParagraphs += `<p class="ishml-choice" data-plot="${p.uid}">${p.summary}</p>`
				})
				story.say(`${passage}${choiceParagraphs}<div><span>One</span><span class="ishml-draggable"> two </span><span>three</span></div>`).instead("div#story")
				
			}
			

			plot.hello.venus.narrate=function()
			{
				var passage=`Greetings, Venusian. Would you like some flytrap salad?`
				var choiceParagraphs=``
				this.subplot.forEach(p=>
				{
					choiceParagraphs += `<p class="ishml-choice" data-plot="${p.uid}">${p.summary}</p>`
				})
				story.say(`${passage}${choiceParagraphs}`).instead("div#story")
				
			}
			plot.hello.earth.narrate=function()
			{
				var passage=`Greetings, Earthling. Would you like a nice cup of tea?`
				var choiceParagraphs=``
				this.subplot.forEach(p=>
				{
					choiceParagraphs += `<p class="ishml-choice" data-plot="${p.uid}">${p.summary}</p>`
				})
				story.say(`${passage}${choiceParagraphs}`).instead("div#story")
			}

			plot.hello.mars.narrate=function()
			{
				var passage=`Greetings, Martian. Would you like a baked potato?`
				var choiceParagraphs=``
				this.subplot.forEach(p=>
				{
					choiceParagraphs += `<p class="ishml-choice" data-plot="${p.uid}">${p.summary}</p>`
				})
				story.say(`${passage}${choiceParagraphs}`).instead("div#story")

			}
		/*	story._storyline_.Mars.plot("Yes","No")

			story._storyline_.Yes.content=function(situation)
			{
				var passage=`Very good.  Your order will be up shortly.`
				
				story.say(`<p>${passage}</p>`).instead("div#story")
			}
			story._storyline_.No.content=function(situation)
			{
				var passage=`Let me go get you a menu.`
				
				story.say(`<p>${passage}</p>`).instead("div#story")

				//story.say(`<table>${pb.list.compose({datasource,header, footer})}`</table>)
				//story.say(compose` ${rule,datasource}`)
			}*/

			story.storyline.introduce({plotpoint:plot.hello})

			story.tell()
		
		</script>
 	</body>
</html>