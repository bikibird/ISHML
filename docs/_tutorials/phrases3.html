---
title: Text Generation Part 3
status: pending
---
<div class="container mt-4">
<h1>Text generation Part Three</h1>
<p class="lead">Prerequisites: You should have read <a href="{{ site.baseurl }}{% link _tutorials/phrases2.html %}">Text Generation Part Two</a>.</p>
<p>The first two parts of this tutorial covered basic text generation.  We are now ready to re-use sub-phrases within a phase and incoporate logic.  However, before we do so, we must give names to the sub-phrases so that we can refer to them elsewhere within the containing phrase.</p>	
<h2>Tags/h2>

<p>The <code>.tag()</code> suffix allows us to attach a name to a phrase.  We first encountered tags in <a href="{{ site.baseurl }}{% link _tutorials/phrases1.html %}">part one</a>, where they were used to tag phrases for data population.  However, there are other uses for tagged phrases. Examine the JavaScript in listing 2.</p>

<span class="badge badge-info">Listing 1</span>
<iframe id="listing1" width="100%" height="400" scrolling="no" src="//jsfiddle.net/bikibird/krom8puj/embedded/html,js,result/?fontColor=ffffff&menuColor=17a2b8" frameborder="0" class="rounded shadow wrap" title="Listing 1"></iframe>

<p>Tagged phrases are stored as properties of the outermost phrase. The outermost phrase is termed the <b>context phrase</b>.  It doesn't matter how deeply the tagged sub-phrases are nested; they will always be surfaced as properties of the context phrase.  Once a tag has been defined, the <code>.context</code> prefix provides access to the context phrase.</p>

<p>The <code>example1</code> variable holds the context phrase. Its first sub-phrase is tagged as <q>pet</q> and is the <code>.pet</code> property of <code>example1</code>. However, we cannot simply refer to <code>example1.pet</code> in the sub-phrase definition becase <code>example1</code> is still undefined. Instead, in the second sub-phrase, <code>.context.pet</code> is used to refer to the sub-phrase tagged as <q>pet</q>.  The <code>.a</code> prefix is included to add the appropriate indefinite article to the sub-phrase.  During text generation a new animal will be picked at random for each of the two sub-phrases.</p> 

<p>Sometimes when referring to a tagged phrase, we don't want to generate entirely new text; we just want repeat the same text that was already generated in an earlier sub-phrase. Study <code>example2</code>. The last expression contains a function, <code>context=>context.pet.text</code>. Anytime a function is encountered during text generation, the function is called with the context phrase as the argument. The <code>.text</code> property of <code>context.pet</code> provides the text that was generated for the frist sub-phrase.</p>

<p>The pet sub-phrase</p>

<h2>If, Then, and Else <h2>
<h2>Concur</h2>
<h2>Recursion</h2>



<p>Continue to <!--a href="{{ site.baseurl }}{% link _tutorials/phrases2.html %}">part two</a--> to learn about more complex grammars, including choice rules and semantic analysis.</p>

	
</div>    

       
