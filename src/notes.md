# plot

The plot plotpoint is a container for all the subplots making up the story

plot

## World

plot.world

The world plotpoint populates story.net with initial story world state

## Actions

plot.action

The action plotpoint contains the subplot for all possible actions.

Actions are responses to player commands. 

Each action is named by using the gerund form of the verb in the players command:

	plot.action.dropping



The action prepares an episode, which is the response to the player's command.

The action's revise method is called with the episode as the argument.  Revise unfolds each plotpoint in action's subplot and either returns the original episode. Or the most salient episode generated by one of the plotpoints of the subplot

	The subplot of each action contains "check" and "instead"

	Commands are atomic.  If a command contains mutiple subjects and objects and the action cannot be applied to all of them, the command should fail the checks. For example "drop keys and beach ball in vase" fails because the beach ball does not fit in the vase.  Therefore, dropping the keys in the vase is also not successful.

	If the check subplot returns an episode the action's episode is abridged to that episode and the "instead" subplot is skipped.  

	If the check subplot does not return an episode, but the "instead" episode does, the action's episode is revised to the instead episode.

	Otherwise, the action's episode is used.

	Revised and abridged episodes have access to the action's episode as their stock episode.


### Adding actions

Add action to plot. See  outline.js, plot.js
* plot.action.gerund.unfold=function(command){return episode}
* plot.action.gerund.check
* plot.action.gerund.instead

Add skill to actors that can perform the action in the world plotpoint (see cloakofdarknes.js)
* $.action.tie("action").to("gerund")
* $.actor.player.tie("has skill").to($.action.gerund)

Add verb to lexicon. See outline.js

lexicon.register("1st person singular verb form", "alias","another alias", "etc").as({ plot: plot.action.gerund, part: "verb", valence:1 })

The player is permitted to drop.

The ball can be dropped.  Carried or wearing tie may be untied

The room can receive a dropped ball.  containing may be tied

# Cords

## Computed Cords

To do: return handler as a property of the cord.
```
ishml.Knot.prototype.example=new ishml.Cord()  //cords are functions.
ishml.Knot.prototype.example.handler.apply= function
ishml.Knot.prototype.example.handler.set= function
ishml.Knot.prototype.example.handler.get= function
``` 
