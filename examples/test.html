<html>
    <head>
    </head>
    <body>
        <script src="../src/ishml.js"></script>
        <script>
            var lexicon=ISHML.Lexicon()
            lexicon
                .register("the","a","an").as({part:"article"})
                .register("take").as({key:"take",part:"verb"})
                .register("steal").as({key:"take",part:"verb"})
                .register("grab").as({key:"take",part:"verb"})
                .register("drop").as({key:"drop",part:"verb"})
                .register("leave").as({key:"drop",part:"verb"})
                .register("ring").as({key:"ring",part:"noun", role:"thing"})
                .register("slipper").as({key:"slipper",part:"noun", role:"thing"})
                .register("diamond").as({key:"ring",part:"adjective", role:"thing"})
                .register("ruby").as({key:"ring",part:"adjective", role:"thing"})
                .register("ruby").as({key:"ruby",part:"noun", role:"thing"})
                .register("ruby").as({key:"slipper",part:"adjective", role:"thing"})
                .register("glass").as({key:"slipper",part:"adjective", role:"thing"})
                .register("glass").as({key:"tumbler",part:"noun", role:"thing"})
                .register("tumbler").as({key:"tumbler",part:"noun", role:"thing"})
                .register("ruby").as({key:"miss_ruby",part:"noun", role:"npc"})
                .register("sam").as({key:"sam",part:"noun", role:"npc"})
                .register("from").as({key:"from",part:"preposition", role:"preposition"})
            
            var adjectives=ISHML.Rule().configure({minimum:0, maximum:5, filter:(definition)=>definition.part==="adjective" })  
            var nounPhrase=ISHML.Rule()
            
            nounPhrase
                .add("article")    
                .add("adjectives")
                .add("noun")
                .configure({mode:nounPhrase.enum.choice})
            nounPhrase.article
                .configure({minimum:0, filter:(definition)=>definition.part==="article" })
            nounPhrase.adjectives
                .configure({minimum:0, maximum:5, filter:(definition)=>definition.part==="adjective" })
            nounPhrase.noun
                .configure({filter:(definition)=>definition.part==="noun" })     
            
            var grammar=ISHML.Rule()    
      
            grammar.choice("command",3)

            grammar.command[0]
                .sequence("subject",nounPhrase)
                .sequence("verb")
                .sequence("directObject",nounPhrase)
            grammar.command[0].subject
                .configure({minimum:0})
            grammar.command[0].verb
                .configure({filter:(definition)=>definition.part==="verb"})
            grammar.command[0].directObject
                .configure({minimum:0})

            grammar.command[1]
                .sequence("subject",nounPhrase)
                .sequence("verb")
                .sequence("directObject",nounPhrase)
                .sequence("indirectObject",nounPhrase)
            grammar.command[1].subject
                .configure({minimum:0})
            grammar.command[1].verb
                .configure({filter:(definition)=>definition.part==="verb"})
            grammar.command[1].indirectObject
                .sequence("preposition")
                .sequence("nounPhrase",nounPhrase)
            grammar.command[1].indirectObject.preposition
                .configure({filter:(definition)=>definition.part==="preposition"})
                
            grammar.command[2]
                .sequence("subject",nounPhrase)
                .sequence("verb")
                .sequence("indirectObject",nounPhrase)
                .sequence("directObject",nounPhrase)
            grammar.command[2].subject
                .configure({minimum:0})
            grammar.command[2].verb
                .configure({filter:(definition)=>definition.part==="verb"})

            
        </script>
    </body>
</html>