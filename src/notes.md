# plot

The plot plotpoint is a container for all the subplots making up the story

plot

## World

plot.world

The world plotpoint populates story.net with initial story world state

## Actions

plot.action

The action plotpoint contains the subplot for all possible actions.

Actions are responses to player commands. Each action is named by using the gerund form of the verb in the players command:

	plot.action.dropping



The action prepares an episode, which is the response to the player's command.

The action's revise method is called with the episode as the argument.  Revise unfolds each plotpoint in action's subplot and either returns the original episode. Or the most salient episode generated by one of the plotpoints of the subplot



	Each action has a "revise" subplot.
	If revise returns an episode, the revised episode has its stock episode set to the action's generated stock episode.

	The resolution of the revised episode may or maynot use the stock episode and may execute code instead of, before, or after the stock episode.

	Typical content of an action plotpoint's unfold method:

	1. Modify the command object (which was passed a parameter) to add more details. For example, divide the direct object into droppable and non-droppable objects.

	2. Call the plotpoint's unfoldSubplot, which will return an array of episodes sorted by salience. These are the revisions.

	3. If there are no revisions, create and return an episode.

	4. If there are revisions, create an episode and set revision[0].stock to it.  Return revision[0] as the episode

	A revised episode resolution may choose to call its stock episode instead, before, or after it executes other code.

	To set the narration of an episode:

	episode.narration(()=>
	{
		// before code
		this.stock()?.episode.narrate() //remove this line for instead behavior
		//after code
	})
	To execute the narration: episode.narration()

	To set the resolution of and episode:

	episode.resolution(()=>
	{
		// before code
		this.stock()?.episode.resolve() //remove this line for instead behavior
		//after code
	})



