---
title: Text Generation Part 1
---
<div class="container mt-4">
<h1>Text generation Part One</h1>
<p class="lead">Prerequisites: You should have a <a href="https://developer.mozilla.org/en-US/docs/Learn">basic working knowledge</a> of JavaScript and HTML and have read about <a href="{{ site.baseurl }}{% link index.html %}">getting started</a>.</p>
<p>ISHML's text generation API facilitates the creation of complex text generation objects using a templating system based on JavaScript's <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals" target="_blank">template literal</a> notation. Specifically, <code>ishml.Template</code> is a tag function that may be called with either template literal notation or standard function call notation. Instead of returning text, however, <code>ishml.Template</code> returns an instance of <code>ishml.Phrase</code>. <b>The template defines the phrase; the phrase generates the text.</b>
<p>This tutorial will start by defining simple phrases and then advance to nested, recursive, conditional, and looping text generation. You will get the most out of this tutorial if you experiment with the examples. Just click the link in the code listings to edit them in JSFiddle.</p>
<h1>Hello, World</h1>	
<p>Listing 1 below shows the <i>Hello World</i> web page for ISHML's text generation API.  If you click on the results tab, you will see a greeting. Clicking the results tab again or clicking on the <q>Click here</q> link updates the greeting.</p>
<span class="badge badge-info">Listing 1</span>
<iframe id="listing1" width="100%" height="200" src="//jsfiddle.net/bikibird/w40tvp6f/embedded/html,js,result/?fontColor=ffffff&menuColor=17a2b8&" frameborder="0" class="rounded shadow" title="Listing 1"><p>Listing 1</p></iframe>

<p>Switch to the HTML tab.  The ishml.js script provides access to the API. The second script, en-us.js, is an optional library of modern American English templates and phrase suffixes. Both scripts are often used together for English language text generation.</p>
<p>Switch to the JavaScript tab and study the code. First, we assign <code>ishml.Template</code> to a variable represented by an underscore.  This is simply for convenience so that we don't have to type out <code>ishml.Template</code> over and over. The underscore was chose because it reflects the "fill in the blanks" nature of text generation. Next we assign a phrase to the myPhrase variable. This phrase happens to be a nested phrase. The outer phrase definition, <q>Hello, _____</q>, has an expression, denoted by <code>${...}</code>, which defines an inner phrase.  The inner phrase fills in the blank of the outer phrase with a random planet each time the text is generated. The last line of the script does the actual work of generating the text and places it inside the <code>h1</code> element.</p>
<h1>Defining Phrases</h1>
<p>The syntax for defining phrases contains minimal punctuation.  It is designed to get out of your way and give you a sense of the text to be generated just by glancing at the code. Listing 2 below demonstrates many styles of phrase definition. As you become more familiar with phrases, you will develop your own style.  Sometimes template literal notation is preferred; sometimes standard function call notation is easier.  Sometimes a deeply nested inline structure is the most straightforward, sometimes it is less confusing to predefine the inner phrases separately and then reference them in the outer phrase. </p>
<span class="badge badge-info">Listing 2</span>
<iframe id="listing2" width="100%" height="350" src="//jsfiddle.net/bikibird/t5dx8aj1/embedded/js/?fontColor=ffffff&menuColor=17a2b8" frameborder="0" class="rounded shadow"  title="Listing 2"></iframe>
<p>Example 1 defines a phrase by using template literal notation. (If you are unfamiliar with template literals and tagged templates, please be sure to <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals" target="_blank">read up</a> on them before continuing this tutorial.)  Unlike standard template literals, <code>ishml.Template</code> returns an instance of <code>ishml.Phrase</code>, not a simple string. The actual string, <q>Hello, world</q>, in <code>example1</code> is hidden away in an array attached to the phrase.</p>
<p>Examples 2, 3, and 5 show phrase definition using standard function call notation. The <i>a</i> variation of the examples show each data value passed as a separate argument.  The <i>b</i> variation passes in a single array of values.  Both variations produce identical results.  While it is common for the data to be a series of strings, you may also pass in complex data objects, other phrases, numbers, or even functions that return phrases, strings, or numbers.  You may mix any of these types freely. </p>
<p>Examples 4a and 4b are nested phrases, which mix both notation styles.  The outer phrase is defined using template literal notation.  The expression inside the template, denoted by <code>${...}</code>, is a phrase definition. Acceptable expressions are expression that evaluate to phrases, strings, numbers, or functions that when called during evaluation return phrases, strings, or numbers.</p>
<p>Examples 6a and 6b define empty phrases.  Leaving the data out of nested phrases can sometimes make the code easier to read.  Data may always be added or replaced after the initial definition a phrase.  </p>

<h1 id="populating">Populating Phrases</h1>
<p>Phrase data may be updated anytime by calling the phrases <code>.populate</code> method.  Listing 3 shows some examples of populating phrases with data.</p>
<span class="badge badge-info">Listing 3</span>
<iframe id="listing3" width="100%" height="300" src="//jsfiddle.net/bikibird/phwym1ns/embedded/js/?fontColor=ffffff&menuColor=17a2b8" frameborder="0" class="rounded shadow"  title="Listing 3"></iframe>
<p>Three alternatives are shown for populating the <code>planets</code> phrase, a simple list of string arguments, complex data as a list of arguments, and complex data in an array. In each case, the incoming data will completely replace the phrase's internal array of data.</p>
<p> Often, we want to be more selective when populating a phrase and send data to specific sub-phrases. This is done by tagging the sub-phrases when the phrase is defined.  Study the definition of <code>myPhrase</code>.  The phrase uses template literal notations and contains two expressions, which are phrases.   The definitions of the sub-phrases have the <code>.tag()</code> method appended to them.  This method assigns an ID tag to each of the phrases, <q>planet</q> and <q>remark</q>. Tagged phrases provide a means for referencing specific sub-phrases within a phrase. In this example <code>.populate</code> is called with an Object as an argument.  The property keys of the Object are matched against the ID tags of the sub-phrases and the data contained in each matching property of the Object is sent to populate the corresponding sub-phrase.</p>

<h1>Saying Something</h1>
<p>Now that we know a little about defining and populating phrases, let's generate some text.</p>
<span class="badge badge-info">Listing 4</span>
<iframe id="listing4" width="100%" height="330" src="//jsfiddle.net/bikibird/ohkpn7gu/embedded/html,js,result/?fontColor=ffffff&menuColor=17a2b8" frameborder="0" class="rounded shadow"  title="Listing 4"></iframe>

<p>Examine the JavaScript in listing 4 above.  Phrases are evaluated by calling the phrase's <code>say()</code> method. This method updates the phrase's <code>text</code> property then returns the phrase. The first <code>console.log()</code> demonstrates accessing the generated text.  The second demonstrates generating and accessing the text in one statement.</p>
<p>Phrases also provide methods for updating web pages. The <code>replace()</code> method takes a <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Selectors">CSS selector string</a> as its argument. It replaces the contents of all elements in the HTML document that match the selector with the contents of the <code>.text</code> property. <code>append()</code> and <code>prepend()</code> work in a similar manner except that they append and prepend the selected elements' contents.  Click on the result tab above to see a live demonstration.</p>
<p>Continue to <a href="{{ site.baseurl }}{% link _tutorials/phrases2.html %}">part two</a> to learn how to alter the behavior of phrases with prefixes and suffixes.</p>
</div>    